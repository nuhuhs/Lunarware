local players = game:GetService("Players");
local workspace = game:GetService("Workspace");
local RunService = game:GetService("RunService");
local TextService = game:GetService('TextService');
local UserInputService = game:GetService("UserInputService");
local TweenService = game:GetService("TweenService");
local CoreGui = game:GetService("CoreGui");
local client = players.LocalPlayer;

local VirtualInputManager = game:GetService("VirtualInputManager");

print("BEING SIGMA !");

repeat wait(); until client.Character;

local char = client.Character;
local hrp = char:WaitForChild("HumanoidRootPart");
local Mouse = client:GetMouse();

client.CharacterAdded:Connect(function()
    char = client.Character;
    hrp = char:WaitForChild("HumanoidRootPart");
end);

queue_on_teleport = (syn and syn.queue_on_teleport) or (fluxus and fluxus.queue_on_teleport) or queue_on_teleport
queue_on_teleport([[loadstring(game:HttpGet('https://raw.githubusercontent.com/nuhuhs/Lunarware/main/TSReload'))()]])

local function StartRaid()
    pcall(function()
        local loop;
        loop = client.PlayerGui:WaitForChild("DialogueUI").ChildAdded:Connect(function(ui)
            task.wait();
            if ui:FindFirstChild("Yes") then
                firesignal(ui:FindFirstChild("Yes").MouseButton1Click);
                loop:Disconnect();
            end;
        end);

        fireclickdetector(workspace.NPCs.RaidBoss.Kisuke.ClickDetector)
    end);
end;

local functions = {};

function functions.Void(target)
    if char and hrp and target and target:FindFirstChild('HumanoidRootPart') then
        local bv = Instance.new("BodyVelocity");
        bv.Parent = target:FindFirstChild('HumanoidRootPart');
        bv.MaxForce = Vector3.new(100000000376832, 100000000376832, 100000000376832);
        bv.Velocity = Vector3.new(100000000376832, -100000000376832, 100000000376832);
        bv.P = 10000;
    end;
end;

if game.PlaceId == 14069678431 then
    if not client:GetAttribute("Party") then
        game:GetService("Players").LocalPlayer.Character.CharacterHandler.Remotes.PartyCreate:FireServer()
    end;

    StartRaid();
elseif game.PlaceId == 17047374266 then
    while task.wait() do
        for i, v in pairs(workspace:WaitForChild('Entities'):GetChildren()) do
            if v == char then continue; end;
            functions.Void(v);
            if v:FindFirstChild("Humanoid") then
                v:FindFirstChild("Humanoid").Health = 0;
            end;
        end;

        if (not char) or (not hrp) then continue; end;

        hrp.CFrame = CFrame.new(102.037888, 4999.75, -87.1630783);

        local bv = Instance.new("BodyVelocity");
        bv.Parent = hrp;
        bv.MaxForce = Vector3.new(0, 0, 0);
        bv.Velocity = Vector3.new(0, 0, 0);
        bv.P = 0;
    end;
else
    while task.wait() do
        local Menu = client.PlayerGui:FindFirstChild("ServerMenu");

        if Menu:FindFirstChild("Frame") and Menu:FindFirstChild("Frame"):FindFirstChild("MainUI") then
            Menu = Menu:FindFirstChild("Frame"):FindFirstChild("MainUI");
        else
            continue;
        end;

        if Menu then
            local KT = Menu:FindFirstChild("Karakura Town");

            if KT then
                local x,y = KT.AbsolutePosition.X, KT.AbsolutePosition.Y;
                VirtualInputManager:SendMouseButtonEvent(x, y, 0, true, game, 1);
                wait()
                VirtualInputManager:SendMouseButtonEvent(x, y, 0, false, game, 1);

                local SF = Menu:FindFirstChild("ScrollingFrame");
                if SF then
                    for i, v in next, (SF:GetChildren()) do
                        if v:IsA("TextButton") and v.Visible and v:FindFirstChild("Location").Text == "Karakura Town" then
                            firesignal(v.MouseButton1Click);
                        end;
                    end;
                end;
            end;
        end;
    end;
end;
